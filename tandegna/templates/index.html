{% extends 'base.html' %}

{% load static %}

{% block title %}Accueil{% endblock  %}

{% block content %}


<div id="tourRow">
<div  class="row">
      {% for article in liste_articles %}      
      <div id="myCard" class="col-md-3">
        <div class="card">
          <div id="photo_id">
            {% if article.options == "Demande" %}
              <h5 style="color:rgb(175, 7, 85)">{{article.options}}</h5>
            {% else %}
            <h5 style="color:rgb(20, 233, 38)">{{article.options}}</h5>
            {% endif %}
            {% if article.prix == "" %}
            <h1>0 Ar</h1>
            {% else %}
            <h1 style="color:blue">{{article.prix}}{{article.devise}}</h1>
            {% endif %}
            {% for images in image %}
            <div id="carouselExampleCaptions" class="carousel slide" data-mdb-ride="carousel">  
                    {% if  images.article_id == article.id %}  
                          <div class="carousel-inner">  
                            <div class="carousel-item active">
                              <img id="img" src="{% static 'media/'%}{{images.image2}}" class="d-block w-100" alt="{{iamges.image2}}"/>
                            </div>
                            
                            <div class="carousel-item">
                              <img id="img" src="{% static 'media/'%}{{images.image1}}" class="d-block w-100" alt="{{iamges.image1}}"/>
                            </div>
    
                            <div class="carousel-item">
                              <img id="img" src="{% static 'media/'%}{{images.image3}}" class="d-block w-100 " alt="{{iamges.image3}}"/>
                            </div>
    
                            <div class="carousel-item">
                              <img id="img" src="{% static 'media/'%}{{images.image4}}" class="d-block w-100 " alt="{{iamges.image4}}"/>
                            </div>
                          </div>
    
                    {% endif %}
    
            </div>
            {% endfor %}
          </div>
          <div class="card-body">
            <h5 class="card-title">{{article.titre|title}}</h5>
          <span>{{article.description|truncatechars:10}}<a href="details_tandegna/{{article.slug}}{{article.id}}"><i><u>plus details</u></i></a></span><br>
          fait le:<small style="color:rgb(243, 42, 7)">{{article.created_by}}</small><br>
          {% for stock in stockArticle %}
            {% if stock.article_id == article.id %}
              <strong>stock disponible : <button class="btn btn-success">{{stock.nombre}}<span></span>  {{stock.unites}}</button> </strong>
            {% endif %}
          {% endfor %}
          
          {% if user.is_authenticated %}
          {% for presta in users %}
          {% if presta.id == article.user_id %}
    
          <div id="contact">
          <strong>Contact en sms ou en email:</strong>
          <button class="btn btn-secondary">{{presta.telephone}} -<i class="fas fa-phone"></i></button>            
          <a href="mailaka/{{presta.email}}{{presta.id}}" class="btn btn-secondary">{{presta.email}} -<i class="fas fa-envelope"></i></a>
          <a href="#!" class="btn btn-primary">Commander</a>
          {% endif %}
          {% endfor %}
          </div>


          {% else %}
          <span><a class="btn btn-info" href="{% url 'login_tandegna' %}">contact</a></span>
          {% endif %}
          </div>
        </div>
      </div>

     
      {% endfor %}
    </div> 
  

    
  </div>
    <div class="paginationTandegna">

    

      <div class="row">
        <div class="col-md-4">
          
          <nav aria-label="">
            {% if liste_articles.has_other_pages  %}
            <ul class="pagination pagination-circle">
              {% if liste_articles.has_previous %}
              <li class="page-item active">
                <a class="page-link" href="?page={{liste_articles.previous_page_number}}"><span>Précedent</span></a>
              </li>
              {% else %}
              <li class="page-item disabled">
                <a class="page-link" href="">précedent</a>
              </li>
            {% endif %}

              {% for i in liste_articles.paginator.page_range %}
              <li class="page-item {% if i == liste_articles.number %} active {% endif %}">
                <a class="page-link" href="?page={{i}}">{{i}}</a>
              </li>                            
              
              {% endfor %}
          
              {% if liste_articles.has_next %}
              <li class="page-item active">
                <a class="page-link" href="?page={{ liste_articles.next_page_number }}">suivant</a>
              </li>
              {% else %}
              <li class="page-item disabled ">
                <a class="page-link" href="">suivant</a>
              </li>
              {% endif %}
            </ul>
            {% endif %}
        </div>

        <div class="col-md4">
          {% if liste_articles.paginator.page %}
          {{listes_articles.paginator}}
          {% endif %}
        </div>
      </div>


  

{% endblock %}
