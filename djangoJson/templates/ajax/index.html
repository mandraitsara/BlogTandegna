<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajax</title>
</head>
<body>
    <h1>Django Ajax Example</h1>
<form method="POST">{% csrf_token %}
    <label for="">Op√©ration</label>
    <input name="a" type="text" id="a">+<input type="text" id="b">
    <input name="b" type="submit" value="calculer" id="ajax-call">
</form>
    <p id="ajax"></p>

    <script>
        document.querySelector("#ajax-call").addEventListener("click", event=>{
            event.preventDefault();
            let formData = new FormData();
            formData.append('a', document.querySelector("#a").value);
            formData.append('b', document.querySelector("#b").value);

            let csrfTokenValue = document.querySelector('[name=csrfmiddlewaretoken]').value;
            const request = new Request('{% url "compute" %}',{
                method: "POST",
                body: formData,
                headers:{"X-CSRFToken":csrfTokenValue}
            })

            fetch(request)
            .then(response => response.json())
            .then(result=>{
                const resultElement = document.querySelector("#ajax")
                resultElement.innerHTML = result["operation_result"]

            })

        })
    </script>
</body>
</html>